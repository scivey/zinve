#!/usr/bin/env zsh

setopt errexit
setopt localtraps
set -uo pipefail

if [[ ${ZINVE__CONFIG__IS_PROD_BUNDLE:-""} != "1" ]]; then
    if [[ -z ${ZINVE__LOADER_FPATH+x} ]]; then
        ZINVE__LOADER_FPATH=${0:A:h:h}/lib/loader.zsh
    fi
    if [[ -e ${ZINVE__LOADER_FPATH} ]]; then
        . ${ZINVE__LOADER_FPATH}
        zinve::loader::load-all-libs ;
    else
        echo "ERROR: SOURCE TARGET '$ZINVE__LOADER_FPATH' NOT FOUND!" >&2 ;
        exit 1 ;
    fi
fi

zinve-main-dispatch $@

